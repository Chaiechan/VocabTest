<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabulary Test</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 90vh;
            background-color: #1a202c;
            color: #e2e8f0;
        }
        body.light {
            background-color: #EDDBBF;
            color: #2d3748;
        }
        .container {
            max-width: 825px;
            width: 90%;
            padding: 20px;
        }
        .card {
            background-color: #2d3748;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 40px;
            transition: all 0.3s ease;
        }
        body.light .card {
            background-color: #FCF7EE;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .button {
            background-color: #4299e1;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .button:hover {
            background-color: #3182ce;
            transform: translateY(-2px);
        }
        .button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }
        .input {
            width: 96%;
            padding: 12px;
            border: 2px solid #4a5568;
            border-radius: 6px;
            margin-bottom: 20px;
            background-color: #2d3748;
            color: #e2e8f0;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        body.light .input {
            background-color: #edf2f7;
            color: #2d3748;
            border-color: #e2e8f0;
        }
        .input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.5);
        }
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
            font-weight: 600;
        }
        .alert-success {
            background-color: #2f855a;
            color: #c6f6d5;
        }
        .alert-error {
            background-color: #9b2c2c;
            color: #fed7d7;
        }
        body.light .alert-success {
            background-color: #c6f6d5;
            color: #2f855a;
        }
        body.light .alert-error {
            background-color: #fed7d7;
            color: #9b2c2c;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #cbd5e0;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #4299e1;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .language-toggle {
            display: flex;
            align-items: center;
            font-weight: 600;
            background-color: #2d3748;
            border-radius: 25px;
            padding: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
			margin-bottom: -20px;
        }
        body.light .language-toggle {
            background-color: #FCF7EE;
        }
        .language-toggle span {
            padding: 5px 10px;
            border-radius: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        .language-toggle span.active {
            background-color: #4299e1;
            color: white;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 28px;
            margin: 0 5px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #cbd5e0;
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #4299e1;
        }
        input:checked + .slider:before {
            transform: translateX(24px);
        }
        body.light .slider {
            background-color: #cbd5e0;
        }
        body.light input:checked + .slider {
            background-color: #4299e1;
        }
        h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            color: #4299e1;
        }
        .question {
            text-align: center;
            font-size: 20px;
            margin-bottom: 20px;
            font-weight: 600;
        }
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .score {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
        }
        .progress {
            text-align: center;
            margin-top: 10px;
            font-size: 16px;
            color: #a0aec0;
        }
        #nextWord {
            display: block;
            margin: 20px auto 0;
        }
        #shuffle {
            display: block;
            margin: 20px auto 0;
            background-color: #805ad5;
        }
        #shuffle:hover {
            background-color: #6b46c1;
        }
		#importXlsx {
            background-color: #38a169;
            margin-right: 10px;
			margin-left: 35px;
			margin-top: 27px;
			margin-bottom: 10px;
        }
        #importXlsx:hover {
            background-color: #2f855a;
        }
        .file-input {
            display: none;
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <div class="header">
            <button id="darkModeToggle" class="button">🌙</button>
            <div>
                <button id="importXlsx" class="button">Import XLSX</button>
                <input type="file" id="xlsxFile" class="file-input" accept=".xlsx">
                <div class="language-toggle">
                    <span id="enTr" class="active">EN-TR</span>
                    <label class="switch">
                        <input type="checkbox" id="languageToggle">
                        <span class="slider"></span>
                    </label>
                    <span id="trEn">TR-EN</span>
                </div>
            </div>
        </div>
        <div class="card">
            <h2>Vocabulary Test</h2>
            <div id="testContent"></div>
        </div>
    </div>
    <script>
        let vocabularyData = [
            { 
                word: ['Hump'], 
                sentence: "The old lady can't walk well due to a hump on her back. / Camels depend on their humps to survive.", 
                turkish: ['Kambur', 'Hörgüç']
            },
            { 
                word: ['Wig', 'Hairpiece'],
                sentence: "When did you start wearing a wig?", 
                turkish: ['Peruk', 'Takma saç']
            },
            { 
                word: ['Chalk'], 
                sentence: "Claire wanted her parents to buy a box of coloured chalks for her.", 
                turkish: ['Tebeşir' , 'Kireçtaşı']
            },
            { 
                word: ['Grab a bite'], 
                sentence: "If you want to grab a bite while you're out, check out what restaurants are open on Christmas Day.", 
                turkish: ['Hızlıca bir şeyler yemek', 'Atıştırmak']
            },
            { 
                word: ['Spill the beans'], 
                sentence: "Don't spill the beans.", 
                turkish: ['Sırrı ağzından kaçırmak']
            },
            { 
                word: ['Cut corners'], 
                sentence: "I had limited time to write my essay, so I cut corners here and there. / He is a person who never cuts corners.", 
                turkish: ['Kolaya kaçmak', 'Kestirmeden gitmek']
            },
            { 
                word: ['Costs an arm and a leg'], 
                sentence: "That new smartphone costs an arm and a leg.", 
                turkish: ['Bir servete mal olmak']
            },
            { 
                word: ['To beat the bulge'], 
                sentence: "Thailand's police force is in a battle to beat the bulge.", 
                turkish: ['Kilo vermek']
            },
            { 
                word: ['Rigorous'], 
                sentence: "It might not be the most rigorous training. / Our company has taken rigorous safety measures against occupational accidents.", 
                turkish: ['Sıkı', 'Titiz']
            },
            { 
                word: ['Occupational Accidents'], 
                sentence: "Insurance of occupational accidents and professional diseases.", 
                turkish: ['İş Kazaları']
            },
            { 
                word: ['Incentive'], 
                sentence: "Bonuses give salespeople a strong incentive to sell.", 
                turkish: ['Teşvik']
            },
            { 
                word: ['Up for grabs'], 
                sentence: "A prize worth $160 is up for grabs.", 
                turkish: ['Herkese açık']
            },
            { 
                word: ['Contraption'], 
                sentence: "This contraption is complicated to use. / This contraption may not look very impressive but ...", 
                turkish: ['Mekanizma', 'Düzenek']
            },
            { 
                word: ['Defy'], 
                sentence: "How dare you defy your teachers? / He has repeatedly defied the UN, and he has never in actual fact complied with UN demands.", 
                turkish: ['Karşı koymak', 'Meydan okumak']
            },
            { 
                word: ['Altitude'], 
                sentence: "Regions can only be classified as mountainous on the basis of their altitude. / The plane maintained an altitude of 25,000 feet.", 
                turkish: ['Rakım', 'İrtifa']
            },
            { 
                word: ['Chopper', 'Helicopter'], 
                sentence: "The chopper made a loud noise.", 
                turkish: ['Helikopter', 'Satır']
            },
            { 
                word: ['Aviation'], 
                sentence: "Model planes are a good way of interesting children in aviation. / George works in Federal Aviation Administration.", 
                turkish: ['Havacılık']
            },
            { 
                word: ['Large-Small Intestine'], 
                sentence: "The large intestine absorbs water. / The duodenum is a section of the small intestine.", 
                turkish: ['Kalın-İnce Bağırsak']
            },
            { 
                word: ['Inflamed Bowel'], 
                sentence: "She had an inflamed bowel when she was a child.", 
                turkish: ['Bağırsak iltihabı', 'İltihaplı bağırsak']
            },
            { 
                word: ["Wrap one's head around something"], 
                sentence: "How do I even wrap my head around this stuff?", 
                turkish: ['bir şeyi anlamaya, kavramaya çalışmak']
            }
        ];

        let currentWordIndex = 0;
        let shuffledVocabulary = [];
        let score = { correct: 0, wrong: 0 };
        let isEnglishToTurkish = true;
        let isDarkMode = true;

        function shuffleVocabulary() {
            shuffledVocabulary = [...vocabularyData].sort(() => Math.random() - 0.5);
            currentWordIndex = 0;
            score = { correct: 0, wrong: 0 };
            renderQuestion();
        }

        function renderQuestion() {
            const currentWord = shuffledVocabulary[currentWordIndex];
            const testContent = document.getElementById('testContent');
            testContent.innerHTML = `
                <p class="question">
                    ${isEnglishToTurkish 
                        ? `What does "${currentWord.word[0]}" mean in Turkish?`
                        : `What does "${currentWord.turkish[0]}" mean in English?`}
                </p>
                <input type="text" id="userAnswer" placeholder="Type your answer here" class="input">
                <div class="button-group">
                    <button id="showClue" class="button">Show Clue</button>
                    <button id="showAnswer" class="button">Show Answer</button>
                </div>
                <div id="clue" style="display: none;"></div>
                <div id="answerFeedback"></div>
                <div class="score">
                    <p>Score: ${score.correct} correct, ${score.wrong} wrong</p>
                </div>
                <div class="progress">
                    <p>Question ${currentWordIndex + 1} of ${shuffledVocabulary.length}</p>
                </div>
                <button id="nextWord" class="button" style="display: none;">Next Word</button>
                <button id="shuffle" class="button">Shuffle</button>
            `;

            document.getElementById('userAnswer').addEventListener('keypress', handleKeyPress);
            document.getElementById('showClue').addEventListener('click', showClue);
            document.getElementById('showAnswer').addEventListener('click', showAnswer);
            document.getElementById('nextWord').addEventListener('click', handleNextWord);
            document.getElementById('shuffle').addEventListener('click', shuffleVocabulary);

            if (!isEnglishToTurkish) {
                document.getElementById('showClue').style.display = 'none';
            }
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter') {
                if (document.getElementById('nextWord').style.display === 'none') {
                    checkAnswer();
                } else {
                    handleNextWord();
                }
            }
        }

        function checkAnswer() {
            const userAnswer = document.getElementById('userAnswer').value.toLowerCase().trim();
            const currentWord = shuffledVocabulary[currentWordIndex];
            const correctAnswers = isEnglishToTurkish ? currentWord.turkish : currentWord.word;

            const isCorrect = correctAnswers.some(answer => 
                answer.toLowerCase().trim() === userAnswer
            );

            score[isCorrect ? 'correct' : 'wrong']++;

            const answerFeedback = document.getElementById('answerFeedback');
            answerFeedback.innerHTML = `
                <div class="alert ${isCorrect ? 'alert-success' : 'alert-error'}">
                    ${isCorrect ? 'Correct!' : `Wrong. The correct answer(s) are: ${correctAnswers.join(', ')}`}
                </div>
            `;

            document.getElementById('userAnswer').disabled = true;
            document.getElementById('showClue').disabled = true;
            document.getElementById('showAnswer').disabled = true;
            document.getElementById('nextWord').style.display = 'block';
        }

        function showClue() {
            const currentWord = shuffledVocabulary[currentWordIndex];
            document.getElementById('clue').innerHTML = `<p><strong>Clue:</strong> ${currentWord.sentence}</p>`;
            document.getElementById('clue').style.display = 'block';
            document.getElementById('showClue').disabled = true;
        }

        function showAnswer() {
            checkAnswer();
        }

        function handleNextWord() {
            if (currentWordIndex < shuffledVocabulary.length - 1) {
                currentWordIndex++;
                renderQuestion();
            } else {
                const testContent = document.getElementById('testContent');
                testContent.innerHTML = `
                    <h3 style="text-align: center;">Test Completed!</h3>
                    <p style="text-align: center;">Final Score: ${score.correct} correct, ${score.wrong} wrong</p>
                    <button id="restartTest" class="button" style="display: block; margin: 20px auto;">Start New Test</button>
                `;
                document.getElementById('restartTest').addEventListener('click', shuffleVocabulary);
            }
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('light', !isDarkMode);
            document.getElementById('darkModeToggle').textContent = isDarkMode ? '🌙' : '☀️';
        }

        function toggleLanguageDirection() {
            isEnglishToTurkish = !isEnglishToTurkish;
            shuffleVocabulary();
        }

        document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);
        document.getElementById('languageToggle').addEventListener('change', function() {
            document.getElementById('enTr').classList.toggle('active');
            document.getElementById('trEn').classList.toggle('active');
            toggleLanguageDirection();
        });

        function importXlsx() {
            const fileInput = document.getElementById('xlsxFile');
            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const data = new Uint8Array(e.target.result);
                const workbook = XLSX.read(data, {type: 'array'});
                const sheetName = workbook.SheetNames[0];
                const worksheet = workbook.Sheets[sheetName];
                const jsonData = XLSX.utils.sheet_to_json(worksheet, {header: ['word', 'sentence', 'turkish']});

                // Remove header row if present
                if (jsonData[0].word === 'word') {
                    jsonData.shift();
                }

                vocabularyData = jsonData.map(item => ({
                    word: item.word.split('\n'),
                    sentence: item.sentence,
                    turkish: item.turkish.split('\n')
                }));

                shuffleVocabulary();
                alert('Vocabulary data imported successfully!');
            };

            reader.readAsArrayBuffer(file);
        }

        document.getElementById('importXlsx').addEventListener('click', function() {
            document.getElementById('xlsxFile').click();
        });

        document.getElementById('xlsxFile').addEventListener('change', importXlsx);

        // Initialize the test
        shuffleVocabulary();
    </script>
</body>
</html>